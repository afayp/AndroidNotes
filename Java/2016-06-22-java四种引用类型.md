---
layout:     post
title:      "Java四种引用类型"
date:       2016-06-22 12:45:09
author:     "afayp"
catalog:    true
tags:
    - Java
---


Java的引用对象类在包java.lang.ref下。其中包含了三种显式的引用类型（也即是Reference类的三个子类）：  
　　SoftReference  
　　WeakReference  
　　PhantomReference  
一个引用对象（reference object）（即以上三种引用类型的对象）封装了一个对其他对象的引用（称作referent）。  
引用对象提供了对referent的clean和get操作，但是不提供set操作。  
引用对象本身可以像其他一般的对象一样被检查和操纵。
<!--more-->


- 强引用：直接的对象引用（直接new，大部分引用实际上都是强引用），当内存空间不足，Java虚拟机宁愿抛出OutOfMemoryError错误，使程序异常终止，也不会靠随意回收具有强引用的对象来解决内存不足问题。
  
- 软引用（SoftReference）：如果一个对象只具有软引用，那就类似于可有可物的生活用品。如果内存空间足够，垃圾回收器就不会回收它，如果内存空间不足了，就会回收这些对象的内存。只要垃圾回收器没有回收它，该对象就可以被程序使用。  
- 弱引用（WeakReference）：如果一个对象只具有弱引用，那就类似于可有可物的生活用品。弱引用与软引用的区别在于：只具有弱引用的对象拥有更短暂的生命周期。在垃圾回收器线程扫描它 所管辖的内存区域的过程中，一旦发现了只具有弱引用的对象，不管当前内存空间足够与否，都会回收它的内存。不过，由于垃圾回收器是一个优先级很低的线程， 因此不一定会很快发现那些只具有弱引用的对象。  


- 虚引用（PhantomReference）：如果一个对象仅持有虚引用，那么它就和没有任何引用一样，在任何时候都可能被垃圾回收。
- 三种类型的引用定义了三种不同层次的可达性级别，由强到弱排列如下：  
　　SoftReference > WeakReference > PhantomReference  
　　越弱表示对垃圾回收器的限制越少，对象越容易被回收。


- 在实际程序设计中一般很少使用弱引用与虚引用，使用软用的情况较多，这是因为软引用可以加速JVM对垃圾内存的回收速度，可以维护系统的运行安全，防止内存溢出（OutOfMemory）等问题的产生 